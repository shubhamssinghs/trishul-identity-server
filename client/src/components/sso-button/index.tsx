import { twMerge } from "tailwind-merge";
import { Button } from "../ui";
import type { SSOButtonProps, SSOIconAndLabelMap } from "./types";
import clsx from "clsx";

const SSO_BUTTON_ICON_LABEL_MAP: SSOIconAndLabelMap = {
  google: {
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="h-5 w-5"
        viewBox="0 0 24 24"
      >
        <g transform="scale(0.09) translate(0, 0)">
          <path
            d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"
            fill="#4285F4"
          />
          <path
            d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"
            fill="#34A853"
          />
          <path
            d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"
            fill="#FBBC05"
          />
          <path
            d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"
            fill="#EB4335"
          />
        </g>
      </svg>
    ),
    label: "Google",
  },
  github: {
    icon: (
      <svg className="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 .5C5.73.5.5 5.73.5 12c0 5.09 3.29 9.4 7.86 10.94.58.1.79-.25.79-.56v-2.16c-3.2.7-3.87-1.37-3.87-1.37-.53-1.34-1.29-1.7-1.29-1.7-1.05-.72.08-.71.08-.71 1.16.08 1.77 1.2 1.77 1.2 1.03 1.77 2.7 1.26 3.36.96.1-.74.4-1.26.72-1.55-2.56-.3-5.26-1.28-5.26-5.68 0-1.25.45-2.27 1.2-3.07-.12-.3-.52-1.53.12-3.2 0 0 .98-.31 3.2 1.17a11.15 11.15 0 0 1 5.84 0C17.8 5.6 18.78 5.9 18.78 5.9c.64 1.67.24 2.9.12 3.2.75.8 1.2 1.82 1.2 3.07 0 4.42-2.7 5.38-5.28 5.66.42.36.78 1.08.78 2.18v3.24c0 .31.2.67.8.56A10.5 10.5 0 0 0 23.5 12C23.5 5.73 18.27.5 12 .5Z" />
      </svg>
    ),
    label: "Github",
  },
  facebook: {
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="h-5 w-5"
        viewBox="126.445 2.281 589 589"
      >
        <circle cx="420.945" cy="296.781" r="294.5" fill="#3c5a9a" />
        <path
          d="M516.704 92.677h-65.239c-38.715 0-81.777 16.283-81.777 72.402.189 19.554 0 38.281 0 59.357H324.9v71.271h46.174v205.177h84.847V294.353h56.002l5.067-70.117h-62.531s.14-31.191 0-40.249c0-22.177 23.076-20.907 24.464-20.907 10.981 0 32.332.032 37.813 0V92.677h-.032z"
          fill="#ffffff"
        />
      </svg>
    ),
    label: "Facebook",
  },
  apple: {
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="h-5 w-5"
        viewBox="-52.01 0 560.035 560.035"
        fill="currentColor"
      >
        <path d="M380.844 297.529c.787 84.752 74.349 112.955 75.164 113.314-.622 1.988-11.754 40.191-38.756 79.652-23.343 34.117-47.568 68.107-85.731 68.811-37.499.691-49.557-22.236-92.429-22.236-42.859 0-56.256 21.533-91.753 22.928-36.837 1.395-64.889-36.891-88.424-70.883-48.093-69.53-84.846-196.475-35.496-282.165 24.516-42.554 68.328-69.501 115.882-70.192 36.173-.69 70.315 24.336 92.429 24.336 22.1 0 63.59-30.096 107.208-25.676 18.26.76 69.517 7.376 102.429 55.552-2.652 1.644-61.159 35.704-60.523 106.559Z" />
        <path d="M310.369 89.418C329.926 65.745 343.089 32.79 339.498 0 311.308 1.133 277.22 18.785 257 42.445c-18.121 20.952-33.991 54.487-29.709 86.628 31.421 2.431 63.52-15.967 83.078-39.655Z" />
      </svg>
    ),
    label: "Apple",
  },
  microsoft: {
    icon: (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        className="h-5 w-5"
        viewBox="0 0 16 16"
        fill="none"
      >
        <path fill="#F35325" d="M1 1h6.5v6.5H1V1z" />
        <path fill="#81BC06" d="M8.5 1H15v6.5H8.5V1z" />
        <path fill="#05A6F0" d="M1 8.5h6.5V15H1V8.5z" />
        <path fill="#FFBA08" d="M8.5 8.5H15V15H8.5V8.5z" />
      </svg>
    ),
    label: "Microsoft",
  },
};

export const SSOButton: React.FC<SSOButtonProps> = ({
  provider,
  label,
  hideLabel = true,
  variant = "outline",
  color = "light",
  className,
  ...rest
}) => {
  if (!provider) return null;
  return (
    <Button
      className={twMerge(
        clsx("flex flex-1 items-center justify-center gap-3"),
        className
      )}
      variant={variant}
      color={color}
      {...rest}
    >
      {SSO_BUTTON_ICON_LABEL_MAP?.[provider].icon ?? ""}
      {!hideLabel && (
        <span>
          {label ? label : SSO_BUTTON_ICON_LABEL_MAP?.[provider].label ?? ""}
        </span>
      )}
    </Button>
  );
};
